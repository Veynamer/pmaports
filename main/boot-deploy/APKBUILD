# Maintainer: Clayton Craft <clayton@craftyguy.net>
pkgname=boot-deploy
pkgver=999.18
pkgrel=2
pkgdesc="tool for finalizing and deploying boot related files"
url="https://gitlab.com/postmarketos/boot-deploy"
arch="noarch"
license="GPL-2.0-or-later"
_commit="e3d496d3bb88668fd53f293d311add788d83b64b"
source="
	os-customization
	https://gitlab.postmarketos.org/postmarketOS/boot-deploy/-/archive/$_commit/boot-deploy-$_commit.tar.gz
	"

check() {
	./test_boot_deploy_functions.sh
}

package() {
	install -Dm755 boot-deploy "$pkgdir"/usr/bin/boot-deploy
	install -Dm755 boot-deploy-functions.sh \
		"$pkgdir"/usr/share/boot-deploy/boot-deploy-functions.sh
	install -Dm644 "$srcdir"/os-customization \
		"$pkgdir"/usr/share/boot-deploy/os-customization

	touch boot-deploy-trigger
	install -Dm644 boot-deploy-trigger \
		"$pkgdir"/usr/share/mkinitfs-triggers/boot-deploy
}
sha512sums="
a243975b9850d9933e0f917f7eb38fc4a76ea658c3dcc56f035f60ee6c62d6740c1107143b8210bdc0231d4c9b6b2003e458120985604eb09649322d359ae89f  os-customization
11d5b2033aa789cc52fe9214cdb2083449438b67d64f2a12ca340791adb968e570d0848c794b3056937e57e35a6378562dcae200992dab1a88592241a7560121  boot-deploy-e3d496d3bb88668fd53f293d311add788d83b64b.tar.gz
"
