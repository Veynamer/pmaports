# Create a list of integers for kernel version, so we can compare it properly. 
{% set kver = [kernel_version | int, kernel_patchlevel | int] %}

CONFIG_EFI_STUB=y
CONFIG_EFI=y
CONFIG_DMI=y
CONFIG_EFI_ESRT=y
CONFIG_PSTORE=y # dependency of CONFIG_EFI_VARS_PSTORE
CONFIG_EFI_VARS_PSTORE=y
CONFIG_EFI_PARAMS_FROM_FDT=y
CONFIG_EFI_RUNTIME_WRAPPERS=y
CONFIG_EFI_GENERIC_STUB=y

{% if kver >= [6, 1] and arch == "arm64" %}
# For systemd-boot
CONFIG_EFI_ZBOOT=y
{% endif %}

{% if arch == "x86_64" %}
# For booting on x86_64 with 32-bit EFI
CONFIG_EFI_MIXED=y
{% endif %}
