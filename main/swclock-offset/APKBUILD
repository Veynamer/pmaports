# Maintainer: Jakko <jahau@rocketmail.com>
pkgname=swclock-offset
pkgver=0.2.3
pkgrel=0
pkgdesc="Keep system time at an offset to a non-writable RTC"
url="https://gitlab.com/postmarketOS/swclock-offset"
arch="noarch"
license="GPL-3.0-or-later"
install="$pkgname.post-deinstall"
subpackages="$pkgname-openrc $pkgname-systemd"
source="https://gitlab.com/postmarketOS/swclock-offset/-/archive/$pkgver/swclock-offset-$pkgver.tar.gz"
options="!check" # No tests

package() {
	make DESTDIR="$pkgdir" install
}

systemd() {
	install="$subpkgname.post-install $subpkgname.pre-deinstall"
	install_if="$pkgname=$pkgver-r$pkgrel systemd"

	amove usr/lib/systemd
}

openrc() {
	install="$subpkgname.post-install $subpkgname.pre-deinstall"
	default_openrc
}

sha512sums="
51c01dc1ffc4b1bd60b1c195fdf80e603580a943535901f2780e67dd7bdba709731cf854b7ec2af3cf68e31ca002db54814ada352eb9b93fb5c62a82a48961dd  swclock-offset-0.2.3.tar.gz
"
